# 対戦モードの方式選定（レース方式 vs 共有盤面）

- 日付: YYYY-MM-DD
- ステータス: Accepted
- 関連: 仕様書 01_requirements.md, 02_functional_spec.md, 設計書 01/02

## 背景 (Context)
- 対戦プレイの実装方式には複数案がある。
- 個人開発/低運用コスト/AI開発適性を考慮し、実装容易性とフェアネスを両立したい。

## 選択肢 (Options)
1) レース方式（推奨）
   - 各プレイヤーが同一シードの盤面を個別に解く。最初のクリアが勝利。
   - 長所: 同時操作競合が無い。実装・テストが容易。チート耐性をサーバー権威で担保しやすい。
   - 短所: 直接の取り合いが無く、対面感は弱め。
2) 共有盤面早押し方式
   - 1 枚の盤面を全員で操作。開放/旗に先着順を適用し、貢献スコアで勝敗。
   - 長所: 競り合い感が強い。
   - 短所: 同時操作の競合処理/フェアネス設計が複雑。ネットワーク遅延差の影響。

## 決定 (Decision)
- MVP は「共有盤面のターン制 1v1（共有フラグ）」を採用する。

## 根拠 (Rationale)
- ターン制により同時操作競合を排除し、公平性と実装容易性を両立。
- 共有盤面/共有フラグにより読み合いと緊張感を演出。

## 影響 (Consequences)
- サーバーは「共有の hidden board」+「共有の public board」を保持。
- フラグは共有し、チョード/開放は共有盤面に即時反映。
- ターン/チェスクロック/スコアをサーバーが管理し、イベントで同期。

## 後続 (Follow-ups)
- ランキング/タイムアタックや観戦は将来 ADR で検討。
