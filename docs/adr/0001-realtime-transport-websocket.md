# リアルタイム通信方式に WebSocket を採用する

- 日付: YYYY-MM-DD
- ステータス: Proposed
- 関連: 仕様書 04_api_spec.md, 設計書 01_high_level_design.md

## 背景 (Context)
- 対戦/協力いずれにおいても、低遅延の状態同期と双方向通信が必要。
- サーバー権威での逐次判定と全員へのブロードキャストを行う。

## 決定 (Decision)
- クライアント—サーバー間のリアルタイム通信に WebSocket を採用する。

## 根拠 (Rationale)
- 長期接続・低オーバーヘッド・全二重通信によりイベント駆動を実現しやすい。
- SSE/ポーリングに比べて操作頻度の高いユースケースに適合。
- ブラウザ標準で広範なサポート。

## 代替案
- Server-Sent Events: 下りのみで上り操作に別手段が必要。
- ロングポーリング: 遅延/オーバーヘッドが増加。

## 影響 (Consequences)
- 接続/切断/再接続の管理が必要。
- 水平スケール時は接続の分散と状態共有（セッションピン止め or 共有ストア）が必要。

## 実施計画 (Implementation)
- HTTP でトークン発行 → WS 接続確立 → スナップショット配信 → イベント駆動運用。

## 参考 (References)
- MDN WebSocket API ドキュメント
